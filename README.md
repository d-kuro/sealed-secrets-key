# sealed-secrets-key

[![CircleCI](https://circleci.com/gh/d-kuro/sealed-secrets-key.svg?style=svg)](https://circleci.com/gh/d-kuro/sealed-secrets-key) [![Go Report Card](https://goreportcard.com/badge/github.com/d-kuro/sealed-secrets-key)](https://goreportcard.com/report/github.com/d-kuro/sealed-secrets-key)

[![asciicast](https://asciinema.org/a/PwWephqOOLDuLuVXoCSTinS1F.svg)](https://asciinema.org/a/PwWephqOOLDuLuVXoCSTinS1F)

## About sealed-secrets-key

sealed-secrets-key generates Secret Objects that [github.com/bitnami-labs/sealed-secrets](https://github.com/bitnami-labs/sealed-secrets) use for encryption.

sealed-secrets-key fork the source code for [github.com/bitnami-labs/sealed-secrets](https://github.com/bitnami-labs/sealed-secrets),
and creates the same RSA Key pair that [github.com/bitnami-labs/sealed-secrets](https://github.com/bitnami-labs/sealed-secrets) generates internally.

## Install

See [github.com/d-kuro/sealed-secrets-key/releases](https://github.com/d-kuro/sealed-secrets-key/releases) for the latest release.

### Build and Run

Build sealed-secrets-key:

```shell
$ make build
```

and run sealed-secrets-key:

```shell
$ ./dist/sealed-secrets-key -o secret.yaml
```

For more information about available options run:

```shell
$ ./dist/sealed-secrets-key -h
Generate sealed-secrets-key

Usage:
  sealed-secrets-key [flags]
  sealed-secrets-key [command]

Examples:

$ sealed-secrets-key -o secret.yaml

Available Commands:
  help        Help about any command
  version     Show version

Flags:
  -h, --help                 help for sealed-secrets-key
      --key-size int         Size of encryption key. (default 4096)
      --key-ttl duration     Duration that certificate is valid for. (default 87600h0m0s)
      --namespace string     Namespace of Secret. (default "kube-system")
  -o, --output string        Output file.
      --secret-name string   Name of Secret containing public/private key. (default "sealed-secrets-key")

Use "sealed-secrets-key [command] --help" for more information about a command.
```

## Generate example

```shell
$ sealed-secrets-key
```

```yaml
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVyVENDQXBXZ0F3SUJBZ0lRTjdKemhaSkpLNmNNQUozNmRQQ3dSVEFOQmdrcWhraUc5dzBCQVFzRkFEQUEKTUI0WERURTVNRFl5TmpFMU1qZ3lOVm9YRFRJNU1EWXlNekUxTWpneU5Wb3dBRENDQWlJd0RRWUpLb1pJaHZjTgpBUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUJBTTJoSkJsSGh5UXR5Q2hsN1JsVWRBMlJIU1luaDl5SlpWQTJROSs3ClZNbCtiMThsM2pLNVJiTjNxZ0c1eGJMN2FraVBlYlFnb1pIRVA2d1dZVXNMQVM1Tm1hVTZYT2hOMFJUYlRIQ0IKamtObjhxRVAwa2VVS0tSTHZmTStMSU94UytaUkF3UUpGMnc0TG9ESkRUajdhZWRYU0FsOWlRcUoydUR5SWNwcAp3Tnp3VDlWSUM4U1ZSY1lTMEpoMHdvL1EzdVVMRmo2RWlUMlk2S29oNXJGU04yMzNCeS9nRDUxZ2xCd0ZCaHlRCnRIQVYvL2hONWt5STlFbGtsNE03OHB6N0NoVDdZV09zYUJPR21tRDloWjhqbEoyd2NyVlpFUXp3alV3SklLUTAKTFEwQ0VVclVvdGd5dnJoeVVyeVJDaDNQT0R6MUd4RjV3V01pT2lZbkhGZDlPNm8weDJjYm9oRzJvQnBnQU9PTgplYlhwVExxcTViM0lvMENDTXIwQnlydkJrK0V0bW5Jd0VGUzczZ2h5VmE0T0FON3A5QkF3b0wveVBUTVRPR2tSCi9Hd3diWVZEOEk2REphcVhrOW92c2hDcU1mMG91MUVpNDhxSmNYNGVyb0piN0Q1YWJGTmo4V1pHZm1CZ3BQekwKMEFDaUx5d0pBSlFOYlpUZnJxd2tXbTg1b0xyM1JWUkMrcS80T0V1UDR5T0JBNGJCbnYvV3FPNGNWT1l1SitzWApLVnZ6WG5SS1pYUlBqNktqWEZvb1R6NWpqUkRHZzAxREFKS1puTVJ0NytZSmxsTnZzNUhOZVlTaHhDbHlKNTg4CkUxd0o4Z1FDV0FDVCtYZkNrR2I0NGpnM25YUWJIKzB0MzMxNGhEemM4ZzJMZktuNEw5RGZwMTdBbnJFWVBnbkkKS3M1N0FnTUJBQUdqSXpBaE1BNEdBMVVkRHdFQi93UUVBd0lBQVRBUEJnTlZIUk1CQWY4RUJUQURBUUgvTUEwRwpDU3FHU0liM0RRRUJDd1VBQTRJQ0FRQWltUHp5NjVFY3BKYUkyNy92eUNFVW96UFZLVjFlYUhEZktvQ3JxWE5uCkdrbXJSTnVjcEpGdys2dTNYVFBHOW9KL3U2aCtSclc3eGNlTDlIejZXazFTZ0xHd3k0Q1JQN1ZETGFYRHdIVjIKd2R5TVptWGRnUmgxNWlVQU5mMXY5Z2NaejJYUFFnTFovTlFSdmJ5cDJWWnVCNFVUM0poMmZEc05FMnNzSnhmaAoxRVBWVGZidXIrV0djQ2J3dFZpbDkxL3lja0cwaTB4L3RRT2xvK0dDdmZKYkJwT0kzeTA4bk9GSHl2Uml0VkdBCjdkMWszTjZuOUZmc2IwUSs0OVFTRWNQZVZqUk1pMjJMNkxFUlo1OXUvMExpRjNlTmVrN1JPVWc3bkhCa3h2VEQKUkI1UEpIb1dSZStRUHI0WThiWUNyWmdTT1c4NDU3NTYzd2kzWkFqU3NlazFGMWtUSytVUC9qYVRrNXQxRnJVagpveU9ETWpMMTZLR0hZRU05MjAwSjRsN2tPRThXeEVKN2dvQ1MxVnVqZ1lkalo0Qi96QUpNOS9xbzFuVXFPOHB1CnI3NTUrTlpSODRFL010UlB6SGlDaFdKTUY4TE5Wakprb3dZMUlUckt5bXU0eWc1ZlpkdFJQQldsZ2x6QjVLVHYKZldsMHE0L29kczB4d0gvYUtlaGtwNTd4ZERBSzFKNWxsMDZPVVBUWWVpeVNrTXpWSnNIV21XT2JzZHE4TEVGbgpBN0NXYkRWend2QSs2aU9ManlEbzE4b2lmbU1DVGVveGFOZ2U0RnRuZEV1SXhuRDNhblZ0TW85cGRwazJTV0g5CmRXNVkyZjZWeU5LYWxhNnNsOTlRMDhLUVA1MnpOaEJmbFZwUkE2UWF0UGs4TXI2RFZob3pQU0lxb01CaVNma3cKQXc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS1FJQkFBS0NBZ0VBemFFa0dVZUhKQzNJS0dYdEdWUjBEWkVkSmllSDNJbGxVRFpEMzd0VXlYNXZYeVhlCk1ybEZzM2VxQWJuRnN2dHFTSTk1dENDaGtjUS9yQlpoU3dzQkxrMlpwVHBjNkUzUkZOdE1jSUdPUTJmeW9RL1MKUjVRb3BFdTk4ejRzZzdGTDVsRURCQWtYYkRndWdNa05PUHRwNTFkSUNYMkpDb25hNFBJaHltbkEzUEJQMVVnTAp4SlZGeGhMUW1IVENqOURlNVFzV1BvU0pQWmpvcWlIbXNWSTNiZmNITCtBUG5XQ1VIQVVHSEpDMGNCWC8rRTNtClRJajBTV1NYZ3p2eW5Qc0tGUHRoWTZ4b0U0YWFZUDJGbnlPVW5iQnl0VmtSRFBDTlRBa2dwRFF0RFFJUlN0U2kKMkRLK3VISlN2SkVLSGM4NFBQVWJFWG5CWXlJNkppY2NWMzA3cWpUSFp4dWlFYmFnR21BQTQ0MTV0ZWxNdXFybAp2Y2lqUUlJeXZRSEt1OEdUNFMyYWNqQVFWTHZlQ0hKVnJnNEEzdW4wRURDZ3YvSTlNeE00YVJIOGJEQnRoVVB3CmpvTWxxcGVUMmkreUVLb3gvU2k3VVNManlvbHhmaDZ1Z2x2c1BscHNVMlB4WmtaK1lHQ2svTXZRQUtJdkxBa0EKbEExdGxOK3VyQ1JhYnptZ3V2ZEZWRUw2ci9nNFM0L2pJNEVEaHNHZS85YW83aHhVNWk0bjZ4Y3BXL05lZEVwbApkRStQb3FOY1dpaFBQbU9ORU1hRFRVTUFrcG1jeEczdjVnbVdVMit6a2MxNWhLSEVLWElubnp3VFhBbnlCQUpZCkFKUDVkOEtRWnZqaU9EZWRkQnNmN1MzZmZYaUVQTnp5RFl0OHFmZ3YwTituWHNDZXNSZytDY2dxem5zQ0F3RUEKQVFLQ0FnQkFKc3U2VDBSc0Z4Umc5aHVZVVc2N1pOQnhQTmY0QjYxaDd1d1Irc0dpOHgwUDFDS1VOSlQ0UHBiOQpYdFc4MXc3N2dEZDU2TXcvUzdpSm1ablU3YVA2ckI4SkcwSXMvMG9CZGNGTlFEMy83WWdXazNjSStjSU1MODBjCi9BS3JPejd3cGNtSkVzVUo4Q1VoN0plQmRYNCt2RTR2RjhrUFRwN0ltd0hMd2w1M0QwbjR3amRacHpCVGNUOCsKc1A2YUc1SE9aejBUV0Fudys2bHFtcFQ4TVNnMTJHR1hvQkYvQ2NoclRXM3dyM3g3azRGK0Y5K0hkUnF4WXY2Wgo1TFAySWFPdGxCZDRIeXVCRy9kQjF4WSs1YnpSeldDY0R5TndwQU9RK3pBQnluMWJsNCtKaHZrZTlnWG1TVlJpCm0rVktFNEg2RW9YVlYrVHJacHc1bHU0U3BYRmRRMU5PbExCczA1WWtJbFRCTVozNVRrSityU08xMTN6MjJ5bUIKcmJhK3RCQUNDVVFJWTk0c2NVSGRsV0NKeVUxczIzL3AvdHVCMTRzcmZHTTV2aXdwcUU4b3FnaFB5QjFDZVlNcAppaHdqTktBUEdsOC91bkZDSDluV2JCNkJwMHNMSkpqdStaSm5HTzJORkNuRXBGcmk2amZDMVhMMHRwNkhES0NHClVpb3Z1QVNiRGg1bkRrZHJZUk1mSW5FdEpxTlpvemFZTWM2MlNwVDVQbGFaRS9ac1NLaW1ueGVFK0NOakl0NTIKWUdNSHJHNGtKbkdNTGpJQ3lROHhCR2Rjd3ZPd2ZNRVVMaDFTWnk1eXZTeEl6TVlvbVdMWWI3bGgxc0VlQm9GbAptWi9oOHNWc29WYzVJRWVwRVhLd09QazNPaWoyaHRIVTJDT2d0MHJVekMzSHNtWDE0UUtDQVFFQTRDOUxzRlFOCkpQelRUZjZXT0RiVnpBdFdzVk9jdWtDWmdtV29HZ04ySXRCdTZCQ2RzT2JRdlpoSncvMUJYZVNXMGs0REFEMEQKc2lZVlN3S0dUbEI5dkQwd0doRzV1QXFHYVBKZFQ4YkR6NGNaRXhTa2xiellRNGJyTWdrUVlSWnRhNGlKVUErRAo4d3ppVGVtMzVEMkE4aTg0TmQwaDBnOUEwNjdoU1Z0S254STNoSWpCRW1yT1NEOTh4OWxjaFdYdWVaTmpCMDFBClMydmtVRUk0bHZtOHAzeHVsWXFwTU9jTm40TGFzOUd5bkdQMnBiSWZQOWxJc0FVTmx5dCtBNmVOSDR2V2RPdXkKRUI0SnhNS2ZDVzdaRHE2bzlZTk5nYkx0WncxTGxHQ2dpdmRISVRlMk9vUUlmTGVOOFRXcldic1lWYkJSbUVreQpod3ZyMjc5V3NiSUtpUUtDQVFFQTZzKzV3YytRWURmNlhMSm1mc1A2YmhlVm5LTCtyeVJsQ2NOYTRaemxlYmZUCmFyL1M4Z1ZUbnJ3bjZrc2M2RkJLZkJzVHZZRk0ranlYTnRYVEh2TUcwRHM5Rld5ZWNxVnAzUG1MdThOZUVyNnQKWFFQZ3BFYzN4azRQaUNTUElYYzBJSmlyaFVkRTMzZTZUVDQ1L0NNbDVrNTRPcnp5ODI3OEw4T09PSjdvNElUUApGdmRPeXVtUFMxK21uc1FLcGNST1FHRTJTT1lJVE5NNUtzMUovc2NGUUkxcWM3SFpoZUFidkVrcTdkbHNPM3NoCmlINDFqWlMxUnY5OFMvdG9lRkVsSFcwcEVDcEFNZFJHdnpZWkpxa205WnhVb2VGdEZCZHoyWTI1S3JFVG56d1YKQUhoRjRiRnV6enFGRGptamxmSHd5Nk1KRHRGdHJBdEU5ZklSVVNYLzR3S0NBUUFMQm1ocmdJYXc5Zm9TVU4zawpYOVg5MWVUcWpaa2NrOGE0NGZUMWFvd3B4Q1JnSjBrS0JSL280dzlsb3hQTzRVb0ZoNjZnR1dBUUo4MU9SZzZDCjFYU0ppRnpRTzJUdHh4NjdGSWhBUHg4c0dwSENIWGJHb21Ya1ZFTkd6NmxOalFQT2tRVm51WXVjclZxSHlHR3gKeU5DSm1JYmtKejdkak1COGFKSk53RDZZT2hZZTMzYlhTQWRqQ0RSRHc4M0lCYTVIcmxibGFnZ3FiV0RxRFllbwo3Ums1QjJhTTFpZmg3c3I5dURxM015M2NnUklGTGhCWlhIODFvTm45UURkUFNMTXBCUUNEK1g5bFNZVGpkMHJJCjlQbVp2ajh5NjhVcEJycWtJY1JBeE12QWFjN0d0RzJ5elFGNTJMRVRWcmRaajFqd0JkN05aWFFscmhGb1dpMlMKU1pZNUFvSUJBUUNUcDNvY3lLUDJEVjFQQ3hQdXBOZ0dnS2dnN2xJTzJtajZ3YkNWYks3VVltYjhtcEZRaFU3Mgo0MFNLVFI5cGFvdmNETDdXRE1mV0YySFRKcFJ5d3NuSENXazQzcXVvVmlJQ3haMDd2ZmVhKy9KU0trMEpvSXNQCkZTa3BLQ3dsRkN0Z1VBQ1RkNlIwalhwR2RsbktGbVFQdGNwZXpWQk5DYjVsWHFoQkxKUXVFdldTY0lOSWo2UCsKOXEvMDZEdjF6MEtSczArS2ViUkFjeFpndHVUUDVHQ0dIaWNSaDRYTWJJZWtWN0k2RE4zRmJZRkJybk9JaXptTwo0cnRMb0ZVcVM0UjJRNTF0djlQTVFic1hKREtlb0FHU3N2SjVOU0w5WGw0SU1ObCtZZ2wvdVMxUHRWSGtRVW4zCjM4bXBqMDh4ekFqcVZLUXVnRDFoMFZoVS9Cb3RtQ0tYQW9JQkFRQ0NhU3Y1emsrNlBSejVnU1crS2NZWktjMUYKOGFvSlNuZm9YZllUZmt3WFNQTWI5UmpYWWs4VmxnSTZXYlpCNGtseUZpWVVyUHlFdzdaR001U29TblRVM0d5MApaUnhwaXVCaVRzN0ZiT1NFTkw5Rkx2aHpOSFllSWptMFpScld1dGZSenVrWXJOc2NvOUw2ZDZHSlFTTHhSR1JjCmNRVm9RZHVrRnJOa1MvSXpHRUVLR01TdWdvZFJqNVp1ZTB2N0FNcEZWWmZmZEFLQ0toUXVqL3U2MGFEYktSSDUKeXkxd1BqeVVFN0RHMVUxZmRoMGtlbGRwSkF2T3VmOE1YK3B3aVk4ckZCbU9hODZGTXVtMWpBa2t2cGR2VVhMSgpTN2MrcDYxdU1UN1liNWVRL2p0WGpsT3Rqd0RTVEsrVEZRVDZOQi9zUWc5dXhOZXZ5akxkYTR0eDRPMHkKLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
kind: Secret
metadata:
  name: sealed-secrets-key
  namespace: kube-system
type: kubernetes.io/tls
```
